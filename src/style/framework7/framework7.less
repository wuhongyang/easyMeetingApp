.transition(@d) {
  -webkit-transition-duration: @d;
  transition-duration: @d;
}
.delay(@d) {
  -webkit-transition-delay: @d;
  transition-delay: @d;
}
.transform(@t) {
  -webkit-transform: @t;
  -ms-transform: @t;
  transform: @t;
}
.transform-origin(@to) {
  -webkit-transform-origin: @to;
  -ms-transform-origin: @to;
  transform-origin: @to;
}
.translate3d(@x:0, @y:0, @z:0) {
  -webkit-transform: translate3d(@x,@y,@z);
  -ms-transform: translate3d(@x,@y,@z);
  transform: translate3d(@x,@y,@z);
}
.animation(@a) {
  -webkit-animation: @a;
  animation: @a;
}
.border-box(){
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.box-shadow(@bs) {
  -webkit-box-shadow: @bs;
  box-shadow: @bs;
}
.scrollable(){
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
.size(@w,@h) {
  width: @w;
  height: @h;
}
.full-size(){
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
.flexbox() {
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}
.flex-wrap(@fw) {
  -webkit-flex-wrap: @fw;
  -ms-flex-wrap: @fw;
  flex-wrap: @fw;
}
.flex-shrink(@fs) {
  -webkit-flex-shrink: @fs;
  -ms-flex: 0 @fs auto;
  flex-shrink: @fs;
}
.justify-content(@jc) when (@jc = flex-start) {
  -webkit-box-pack: start;
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
}
.justify-content(@jc) when (@jc = flex-end) {
  -webkit-box-pack: end;
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
}
.justify-content(@jc) when (@jc = space-between) {
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}
.justify-content(@jc) when not (@jc = flex-start) and not (@jc = flex-end) and not (@jc = space-between) {
  -webkit-box-pack: @jc;
  -ms-flex-pack: @jc;
  -webkit-justify-content: @jc;
  justify-content: @jc;
}
.align-items(@ai) when (@ai = flex-start) {
  -webkit-box-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}
.align-items(@ai) when (@ai = flex-end) {
  -webkit-box-align: end;
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
}
.align-items(@ai) when not (@ai = flex-start) and not (@ai = flex-end) {
  -webkit-box-align: @ai;
  -ms-flex-align: @ai;
  -webkit-align-items: @ai;
  align-items: @ai;
}
.align-content(@ai) {
  -ms-flex-line-pack: @ai;
  -webkit-align-content: @ai;
  align-content: @ai;
}
.align-self(@as) {
  -ms-flex-item-align: @as;
  -webkit-align-self: @as;
  align-self: @as;
}
.clearfix() {
  &:before,
  &:after {
    content: " ";
    display: table;
  }
  &:after {
    clear: both;
  }
}

@imgBaseUrl: "../img";
html,body {
  position: relative;
  height: 100%;
  width: 100%;
  overflow-x: hidden;
}
body {
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 0;
  color: #000;
  font-size: 14px;
  line-height: 1.4;
  width: 100%;
  -webkit-text-size-adjust:100%;
  background: #fff;
  overflow: hidden;
}
// Fix for iPad in Safari in Lanscape mode
@media all and (width:1024px) and (height:691px) and (orientation:landscape) {
  html, body {
    height: 671px;
  }
}
@media all and (width:1024px) and (height:692px) and (orientation:landscape) {
  html, body {
    height: 672px;
  }
}

* {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  -webkit-touch-callout:none;
}
a, input, textarea, select {
  outline: 0;
}

@blue:#007aff;
@red: #ff3b30;
@white: #ffffff;
@black: #000000;
@lightblue: #5ac8fa;
@yellow: #ffcc00;
@orange: #ff9500;
@pink: #ff2d55;
@green: #4cd964;
@gray: #8e8e93;

a {
  text-decoration: none;
  color: @blue;
}
p {
  margin: 1em 0;
}
/* === Grid === */
.row {
  .flexbox();
  .justify-content(space-between);
  .flex-wrap(wrap);
  > [class*="col-"] {
    .border-box();
  }
}
@cols: 5, 10, 15, 20, 25, 100/3, 40, 50, 60, 100*(2/3), 75, 80, 85, 90, 95, 100;
.row {
  .-(@i: length(@cols)) when (@i > 0) {
  @divider: e(extract(@cols, @i));
  @className: `Math.floor(@{divider})`;
  @n: `100/parseFloat(@{divider})`;
  @n-1: @n - 1;
  .col-@{className} {
    width: ~"@{divider}%";
    width: ~"-webkit-calc( (100% - 15px*@{n-1}) / @{n})";
    width: ~"calc( (100% - 15px*@{n-1}) / @{n})";
  }
  &.no-gutter {
    .col-@{className} {
      width: ~"@{divider}%";
    }
  }
  .-((@i - 1));
} .-;
}
@media all and (min-width:768px) {
  .row {
    .-(@i: length(@cols)) when (@i > 0) {
    @divider: e(extract(@cols, @i));
    @className: `Math.floor(@{divider})`;
    @n: `100/parseFloat(@{divider})`;
    @n-1: @n - 1;
    .tablet-@{className} {
      width: ~"@{divider}%";
      width: ~"-webkit-calc( (100% - 15px*@{n-1}) / @{n})";
      width: ~"calc( (100% - 15px*@{n-1}) / @{n})";
    }
    &.no-gutter {
      .tablet-@{className} {
        width: ~"@{divider}%";
      }
    }
    .-((@i - 1));
  } .-;
  }
}

/* === Views === */
.views, .view {
  position: relative;
  .size(100%,100%);
  z-index: 5000;
}
.views {
  .scrollable();
}
.view {
  overflow: hidden;
  .border-box();
}

/* === Pages === */
.pages {
  position: relative;
  .size(100%,100%);
  overflow: hidden;
  background: #000;
}
.page {
  .border-box();
  .full-size();
  overflow: hidden;
  background: #efeff4;
  .translate3d(0,0,0);
  opacity: 1;
  .box-shadow(none);
  &.cached {
    display: none;
  }
}
.page-on-left {
  opacity: 0.9;
  .box-shadow(0 0 12px rgba(0,0,0,0.5));
  .translate3d(-20%);
}
.page-on-center {
  opacity: 1;
  .box-shadow(0 0 12px rgba(0,0,0,0.5));
  .translate3d(0);
}
.page-on-right {
  .box-shadow(none);
  opacity: 1;
  .translate3d(100%);
}
.page-content {
  .scrollable();
  .border-box();
  height: 100%;
}

@pageDuration: 300ms;

//Class that will trigger transition during page custom transitions (like swipe-back)
.page-transitioning {
  .transition(@pageDuration);
}

// From/to Right To/from Center animations
.page-from-right-to-center {
  .animation(pageFromRightToCenter @pageDuration forwards);
}
.page-from-center-to-right {
  .animation(pageFromCenterToRight @pageDuration forwards);
}
@-webkit-keyframes pageFromRightToCenter {
  from {
    .box-shadow(none);
    -webkit-transform: translate3d(100%,0,0);
  }
  to {
    .box-shadow(0 0 12px rgba(0,0,0,0.5));
    -webkit-transform: translate3d(0,0,0);
  }
}
@-webkit-keyframes pageFromCenterToRight {
  from {
    .box-shadow(0 0 12px rgba(0,0,0,0.5));
    -webkit-transform: translate3d(0,0,0);
  }
  to {
    .box-shadow(none);
    -webkit-transform: translate3d(100%,0,0);
  }
}
@keyframes pageFromRightToCenter {
  from {
    .box-shadow(none);
    transform: translate3d(100%,0,0);
  }
  to {
    .box-shadow(0 0 12px rgba(0,0,0,0.5));
    transform: translate3d(0,0,0);
  }
}
@keyframes pageFromCenterToRight {
  from {
    .box-shadow(0 0 12px rgba(0,0,0,0.5));
    transform: translate3d(0,0,0);
  }
  to {
    .box-shadow(none);
    transform: translate3d(100%,0,0);
  }
}
// From/to Center To/from Left animations
.page-from-center-to-left {
  .animation(pageFromCenterToLeft @pageDuration forwards);
}
.page-from-left-to-center {
  .animation(pageFromLeftToCenter @pageDuration forwards);
}

@-webkit-keyframes pageFromCenterToLeft {
  from {
    opacity: 1;
    -webkit-transform: translate3d(0,0,0);
  }
  to {
    opacity: 0.9;
    -webkit-transform: translate3d(-20%,0,0);
  }
}
@-webkit-keyframes pageFromLeftToCenter {
  from {
    opacity: 0.9;
    -webkit-transform: translate3d(-20%,0,0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0,0,0);
  }
}
@keyframes pageFromCenterToLeft {
  from {
    opacity: 1;
    transform: translate3d(0,0,0);
  }
  to {
    opacity: 0.9;
    transform: translate3d(-20%,0,0);
  }
}
@keyframes pageFromLeftToCenter {
  from {
    opacity: 0.9;
    transform: translate3d(-20%,0,0);
  }
  to {
    opacity: 1;
    transform: translate3d(0,0,0);
  }
}
// Disable Box shadow animation on Android
html.android {
  .page {
    box-shadow: none !important;
  }
  .page-from-right-to-center {
    .animation(pageFromRightToCenterDegrade @pageDuration forwards);
  }
  .page-from-center-to-right {
    .animation(pageFromCenterToRightDegrade @pageDuration forwards);
  }
}
@-webkit-keyframes pageFromRightToCenterDegrade {
  from {
    -webkit-transform: translate3d(100%,0,0);
  }
  to {
    -webkit-transform: translate3d(0,0,0);
  }
}
@-webkit-keyframes pageFromCenterToRightDegrade {
  from {
    -webkit-transform: translate3d(0,0,0);
  }
  to {
    -webkit-transform: translate3d(100%,0,0);
  }
}
@keyframes pageFromRightToCenterDegrade {
  from {
    transform: translate3d(100%,0,0);
  }
  to {
    transform: translate3d(0,0,0);
  }
}
@keyframes pageFromCenterToRightDegrade {
  from {
    transform: translate3d(0,0,0);
  }
  to {
    transform: translate3d(100%,0,0);
  }
}
/* === Toolbars === */
@navbarBg : #f7f7f8;
@navbarBorderColor: #c4c4c4;
@toolbarBg: @navbarBg;
@toolbarBorderColor: @navbarBorderColor;
@navbarLinksColor: @blue;
@tabbarLinksColor: #929292;
@tabbarActiveLinksColor: @blue;

.navbar-inner, .toolbar-inner {
  .full-size();
  padding: 0 8px;
  .border-box();
  .flexbox();
  .justify-content(space-between);
  .align-items(center);
}

.navbar, .toolbar {
  height: 44px;
  width: 100%;
  .border-box();
  font-size: 17px;
  position: relative;
  margin: 0;
  z-index: 500;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  b {
    font-weight: 500;
  }
  a.link {
    line-height: 44px;
    height: 44px;
    text-decoration: none;
    position: relative;
    .flexbox();
    .justify-content(flex-start);
    .align-items(center);
    .transition(300ms);
    &:active{
      opacity: 0.3;
      .transition(0ms);
    }
    i+span, i+i, span+i, span+span {
      margin-left: 7px;
    }
  }
  a.icon-only {
    min-width: 44px;
    .flexbox();
    .justify-content(center);
    .align-items(center);
    margin: 0;
  }
  i.icon {
    display: block;
  }
}
.navbar {
  left: 0;
  top: 0;
  background: @navbarBg;
  border-bottom: 1px solid @navbarBorderColor;
  html.retina.ios-gt-7 & {
    border-bottom-width: 0.5px;
  }
  .center {
    font-size: 17px;
    font-weight: 500;
    text-align: center;
    margin: 0;
    position: relative;
    overflow: hidden;
    text-overflow:ellipsis;
    white-space: nowrap;
    line-height: 44px;
    .flex-shrink(10);
    .flexbox();
    .align-items(center);
  }
  .left, .right {
    .flex-shrink(0);
    .flexbox();
    .justify-content(flex-start);
    .align-items(center);
    .translate3d(0,0,0);
    a+a {
      margin-left: 15px;
    }
  }
  .left {
    margin-right: 10px;
  }
  .right {
    margin-left: 10px;
  }
  .right:first-child {
    position: absolute;
    right: 8px;
    height: 100%;
  }

}
.toolbar {
  left: 0;
  bottom: 0;
  background: @toolbarBg;
  border-top: 1px solid @toolbarBorderColor;
  html.retina.ios-gt-7 & {
    border-top-width: 0.5px;
  }
  a {
    .flex-shrink(1);
    position: relative;
    white-space: nowrap;
    text-overflow:ellipsis;
    overflow: hidden;
  }
}

// Tabbar
.tabbar {
  color: @tabbarLinksColor;
  z-index: 5001;
  a {
    color: @tabbarLinksColor;
  }
  a.active {
    color: @tabbarActiveLinksColor;
  }
  a.tab-link, a.link {
    height: 100%;
    width: 100%;
    .border-box();
    .flexbox();
    .justify-content(center);
    .align-items(center);
    overflow: visible;
    -webkit-box-flex: 1;
    -ms-flex: 1;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }
}
.tabbar-labels {
  height: 50px;
  a.tab-link, a.link {
    padding-top: 4px;
    padding-bottom: 4px;
    height: 100%;
    .justify-content(space-between);
  }
  span.tabbar-label {
    line-height: 1;
    display: block;
    letter-spacing: 0.01em;
    font-size: 10px;
    position: relative;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
}
@media all and (min-width:768px) {
  .tabbar {
    .toolbar-inner {
      .justify-content(center);
    }
    a.tab-link, a.link {
      width: auto;
      min-width: 105px;
    }
  }
  .tabbar-labels {
    height: 55px;
    span.tabbar-label {
      font-size: 14px;
    }
  }
}

// Bars animations
@toolbarDuration: 400ms;

.navbar-from-right-to-center {
  .left, .right, .center {
    .animation(navbarElementFadeIn @toolbarDuration forwards);
  }
  .sliding {
    opacity: 1;
  }

}
.navbar-from-center-to-right {
  .left, .right, .center {
    .animation(navbarElementFadeOut @toolbarDuration forwards);
  }
  .sliding {
    opacity: 0;
  }
}
@-webkit-keyframes navbarElementFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@keyframes navbarElementFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
.navbar-from-center-to-left {
  .left, .right, .center {
    .animation(navbarElementFadeOut @toolbarDuration forwards);
  }
  .sliding {
    opacity: 0;
  }
}
.navbar-from-left-to-center {
  .left, .right, .center {
    .animation(navbarElementFadeIn @toolbarDuration forwards);
  }
  .sliding {
    opacity: 1;
  }
}
.navbar-on-left {
  .left, .right, .center {
    opacity: 0;
  }
  .sliding {
    opacity: 0;
  }
}
.navbar-on-right {
  .left, .right, .center {
    opacity: 0;
  }
  .sliding {
    opacity: 0;
  }
}
@-webkit-keyframes navbarElementFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
@keyframes navbarElementFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
.navbar-from-right-to-center, .navbar-from-center-to-right, .navbar-from-center-to-left, .navbar-from-left-to-center {
  .left.sliding .back.link .icon {
    .transition(@toolbarDuration);
  }
  .sliding {
    .transition(@toolbarDuration);
    .animation(none);
  }
}
/* === Relation between toolbar/navbar types and pages === */
.page, .view, .views{
  >.navbar, >.toolbar {
    position: absolute;
  }
}
.navbar-through {
  .page-content {
    padding-top: 44px;
  }
}
.toolbar-through {
  .page-content {
    padding-bottom: 44px;
  }
}
.navbar-fixed .page-content {
  padding-top: 44px;
}
.toolbar-fixed .page-content {
  padding-bottom: 44px;
}
// Page Hidden Navbar
.hidden-navbar {
  .navbar {
    .transition(400ms);
    .translate3d(0,-100%,0);
  }
}
.hiding-navbar {
  .navbar {
    .transition(400ms);
    .translate3d(0,0,0);
  }
}
.page.no-navbar .page-content {
  padding-top: 0;
}
// Page Hidden Toolbar
.hidden-toolbar {
  .toolbar {
    .transition(400ms);
    .translate3d(0,100%,0);
  }
}
.hiding-toolbar {
  .toolbar {
    .transition(400ms);
    .translate3d(0,0,0);
  }
}
.page.no-toolbar .page-content {
  padding-bottom: 0;
}

/* === Icons === */
i.icon {
  display: inline-block;
  vertical-align: middle;
  background-size: 100% auto;
  background-position: center;
  background-repeat: no-repeat;
  font-style: normal;
  position: relative;
  &.icon-back {
    width: 12px;
    height: 20px;
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 20'><path d='M10,0l2,2l-8,8l8,8l-2,2L0,10L10,0z' fill='%23007aff'/></svg>");
  }
  &.icon-bars {
    width: 21px;
    height: 13px;
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 42 26'><path fill='%23007aff' d='M0,0h4v4H0V0z M8,1h34v2H8V1z M0,11h4v4H0V11z M8,12h34v2H8V12z M0,22h4v4H0V22z M8,23h34v2H8V23z'/></svg>");
  }
  &.icon-camera {
    width: 25px;
    height: 20px;
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 25 20'><path fill='%238C8D92' d='M13.3,5.5c-2.7,0-5,2.2-5,5s2.2,5,5,5c2.7,0,5-2.2,5-5S16,5.5,13.3,5.5z'/><path fill='%238C8D92' d='M22.8,1.8h-3.3c-0.2-1.3-1-1.8-2-1.8H8.1c-1,0-1.8,0.4-2,1.8H2.8C1.4,1.8,0,2.8,0,4.2v12.6 c0,1.4,1.4,2.5,2.8,2.5h20c1.4,0,2.2-1.1,2.2-2.5V4.2C25,2.8,24.2,1.8,22.8,1.8z M3.5,6.4C2.6,6.4,2,5.8,2,5c0-0.8,0.7-1.5,1.5-1.5 S5,4.1,5,5C5,5.8,4.3,6.4,3.5,6.4z M13.3,16.8c-3.5,0-6.3-2.7-6.3-6.2c0-3.3,2.5-6.2,5.7-6.2h1.2c3.2,0,5.7,2.9,5.7,6.2 C19.6,14.1,16.7,16.8,13.3,16.8z'/></svg>");
  }
  &.icon-f7 {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-f7.png");
  }
  &.icon-form-name {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-name.png");
  }
  &.icon-form-password {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-password.png");
  }
  &.icon-form-email {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-email.png");
  }
  &.icon-form-calendar {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-calendar.png");
  }
  &.icon-form-tel {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-tel.png");
  }
  &.icon-form-gender {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-gender.png");
  }
  &.icon-form-toggle {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-toggle.png");
  }
  &.icon-form-comment {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-comment.png");
  }
  &.icon-form-settings {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-settings.png");
  }
  &.icon-form-url {
    width: 29px;
    height: 29px;
    background-image: url("@{imgBaseUrl}/i-form-url.png");
  }
  &.icon-next, &.icon-prev {
    width: 15px;
    height: 15px;
  }
  &.icon-next {
    background: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15'><g><path fill='%23007aff' d='M1,1.6l11.8,5.8L1,13.4V1.6 M0,0v15l15-7.6L0,0L0,0z'/></g></svg>");
  }
  &.icon-prev {
    background: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15'><g><path fill='%23007aff' d='M14,1.6v11.8L2.2,7.6L14,1.6 M15,0L0,7.6L15,15V0L15,0z'/></g></svg>");
  }
  &.icon-plus {
    width: 25px;
    height: 25px;
    font-size: 31px;
    line-height: 20px;
    text-align: center;
    font-weight: 100;
  }
}

.badge {
  font-size: 13px;
  display: inline-block;
  color:#fff;
  background: #8e8e93;
  border-radius: 20px;
  padding: 1px 7px;
  .border-box();
}
.icon .badge {
  position: absolute;
  left: 100%;
  margin-left: -10px;
  top: -2px;
  font-size: 10px;
  padding: 1px 5px;
}
/* === Content Block === */
@contentBlockBorderColor: #c8c7cc;
@contentBlockColor: #6d6d72;
@contentBlockTitle: @contentBlockColor;
.content-block {
  margin: 35px 0;
  padding: 0 15px;
  color: @contentBlockTitle;

}
.content-block-title {
  position: relative;
  overflow: hidden;
  margin: 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-size: 14px;
  text-transform: uppercase;
  line-height: 1;
  color: @contentBlockColor;
  margin: 35px 15px 10px;
  + .list-block, + .content-block {
    margin-top: 10px;
  }
}
.content-block-inner {
  background: #fff;
  padding: 10px 15px;
  margin-left: -15px;
  width: 100%;
  border-bottom: 1px solid @contentBlockBorderColor;
  border-top: 1px solid @contentBlockBorderColor;
  color: #000;
  html.retina.ios-gt-7 & {
    border-top-width: 0.5px;
    border-bottom-width: 0.5px;
  }
}
.content-block.inset {
  margin-left: 15px;
  margin-right: 15px;
  border-radius: 7px;
  .content-block-inner {
    border: none;
    border-radius: 7px;
  }
}
@media all and (min-width:768px) {
  .content-block.tablet-inset {
    margin-left: 15px;
    margin-right: 15px;
    border-radius: 7px
  }

  .content-block.tablet-inset .content-block-inner {
    border: none;
    border-radius: 7px;
  }
}

/* === Lists === */
@listBlockBorderColor: #c8c7cc;
@listBlockBg: #fff;
@dividerBg: #F7F7F7;
@dividerColor: #8e8e93;
.list-block {
  margin: 35px 0;
  font-size: 17px;
  ul {
    background: @listBlockBg;
    list-style: none;
    padding: 0;
    margin: 0;
    border-top: 1px solid @listBlockBorderColor;
    border-bottom: 1px solid @listBlockBorderColor;
    position: relative;
    ul {
      border-top: none;
      border-bottom: none;
      padding-left: 45px;
    }
  }

  .align-top, .align-top .item-content, .align-top .item-inner {
    .align-items(flex-start);
  }

  .inset() {
    margin-left: 15px;
    margin-right: 15px;
    border-radius: 7px;
    .content-block-title {
      margin-left: 0;
      margin-right: 0;
    }
    ul {
      border-radius: 7px;
      border-top: none;
      border-bottom: none;
    }
    li:first-child > a{
      border-radius: 7px 7px 0 0;
    }
    li:last-child > a{
      border-radius: 0 0 7px 7px;
    }
    li:first-child:last-child > a {
      border-radius: 7px;
    }
  }
  &.inset {
    .inset()
  }
  &.tablet-inset {
    @media all and (min-width:768px) {
      .inset();
    }
  }

  // List items
  li {
    .border-box();
    position: relative;
  }

  .item-media {
    .flexbox();
    .flex-shrink(0);
    .flex-wrap(nowrap);
    .border-box();
    .align-items(center);
    padding-top: 7px;
    padding-bottom: 8px;
    i + i {
      margin-left: 5px;
    }
    i + img {
      margin-left: 5px;
    }
  }
  .item-media + .item-inner {
    margin-left: 15px;
  }
  .item-inner {
    padding-right: 15px;
    border-bottom: 1px solid @listBlockBorderColor;
    width: 100%;
    padding-top: 8px;
    padding-bottom: 7px;
    min-height: 44px;
    .border-box();
    .flexbox();
    -webkit-box-flex:1;
    -ms-flex:1;
    .justify-content(space-between);
    .align-items(center);
  }
  .item-title {
    .flex-shrink(1);
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;

    &.label {
      width: 35%;
      .flex-shrink(0);
    }
  }
  .item-input {
    width: 100%;
    margin-top: -8px;
    margin-bottom: -7px;
    -webkit-box-flex:1;
    -ms-flex:1;
    .flex-shrink(1);
  }
  .item-after {
    white-space: nowrap;
    color: #8e8e93;
    .flex-shrink(0);
    margin-left: 5px;
    .flexbox();
    max-height: 28px;
  }
  .smart-select .item-after {
    max-width: 70%;
    overflow: hidden;
    text-overflow:ellipsis;
    position: relative;
  }
  .item-link {
    .transition(300ms);
    display: block;
    color: inherit;

    .item-inner {
      padding-right: 35px;
      background: no-repeat -webkit-calc(~"100% - 15px") center;
      background: no-repeat calc(~"100% - 15px") center;
      background-image: url("data:image/svg+xml;charset=utf-8,<svg viewBox='0 0 60 120' xmlns='http://www.w3.org/2000/svg'><path d='m60 61.5-38.25 38.25-9.75-9.75 29.25-28.5-29.25-28.5 9.75-9.75z' fill='%23c7c7cc'/></svg>");
      background-size: 10px 20px;
    }
    &:active {
      .transition(0ms);
      background-color: #d9d9d9;
      .item-inner {
        border-bottom-color: transparent;
      }
    }
    &.list-button {
      padding: 0 15px;
      text-align: center;
      color: @blue;
      display: block;
      border-bottom: 1px solid @listBlockBorderColor;
      line-height: 43px;
    }
  }
  .item-content {
    .border-box();
    padding-left: 15px;
    min-height: 44px;
    .flexbox();
    .justify-content(space-between);
    .align-items(center);
  }
  // Label after List block
  .list-block-label {
    margin: 10px 0 35px;
    padding: 0 15px;
    font-size: 14px;
    color: #8f8f94;
  }

  // Swipe outs
  .swipeout.deleting {
    overflow: hidden;
    .transition(300ms);
    .swipeout-content {
      .translate3d(-100%);
    }
  }
  .swipeout.transitioning {
    .swipeout-content {
      .transition(300ms);
    }
  }
  .swipeout-content {
    position: relative;
    z-index: 10;
    background: #fff;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
  .swipeout-actions {
    border-bottom: 1px solid @listBlockBorderColor;
    position: absolute;
    z-index: 0;
    right: 0;
    top: 0;
    width: 100%;
    height: 100%;
    .border-box();
  }
  .swipeout-actions-inner {
    position: absolute;
    right: 0;
    top: 0;
    height: 100%;
    .flexbox();
    a {
      padding: 0 30px;
      color:#fff;
      background: #c7c7cc;
      .flexbox();
      .align-items(center);
    }
    a.swipeout-delete {
      background: @red;
    }
  }
  .item-subtitle {
    font-size: 15px;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
    max-width: 100%;
    text-overflow:ellipsis;
  }
  .item-text {
    font-size: 15px;
    color: #8e8e93;
    line-height: 21px;
    position: relative;
    overflow: hidden;
    height: 42px;
    text-overflow:ellipsis;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    display: -webkit-box;
  }
  &.media-list, li.media-item {
    .item-title {
      font-weight: 500;
    }
    .item-inner {
      display: block;
      padding-top: 10px;
      padding-bottom: 9px;
      .align-self(stretch);
    }
    .item-link .item-inner {
      background: none;
      padding-right: 15px;
    }
    .item-link .item-title-row {
      padding-right: 20px;
      background: no-repeat right center;
      background-image: url("data:image/svg+xml;charset=utf-8,<svg viewBox='0 0 60 120' xmlns='http://www.w3.org/2000/svg'><path d='m60 61.5-38.25 38.25-9.75-9.75 29.25-28.5-29.25-28.5 9.75-9.75z' fill='%23c7c7cc'/></svg>");
      background-size: 10px 20px;
    }
    .item-media {
      padding-top: 9px;
      padding-bottom: 10px;
      img {
        display: block;
      }
    }
    .item-title-row {
      .flexbox();
      .justify-content(space-between);
    }
  }
  .list-group:nth-child(n+2) {
    ul {
      border-top: none;
    }
  }
  .item-divider, .list-group-title {
    background: @dividerBg;
    border-top: 1px solid @listBlockBorderColor;
    margin-top: -1px;
    padding: 4px 15px;
    white-space: nowrap;
    position: relative;
    max-width: 100%;
    text-overflow: ellipsis;
    overflow: hidden;
    color: @dividerColor;
  }
  .list-group-title {
    position: relative;
    position: -webkit-sticky;
    position: -moz-sticky;
    position: sticky;
    top: 0px;
    z-index: 10;
    margin-top: 0;
    border-top: none;
  }

  // Sortable
  .sortable-handler {
    position: absolute;
    right: 0;
    top: 0;
    height: ~"-webkit-calc(100% - 1px)";
    height: ~"calc(100% - 1px)";
    z-index: 10;
    background-repeat: no-repeat;
    background-size: 18px 12px;
    background-position: center;
    width: 35px;
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 18 12' fill='%23c7c7cc'><path d='M0,2V0h22v2H0z'/><path d='M0,7V5h22v2H0z'/><path d='M0,12v-2h22v2H0z'/></svg>");
    opacity: 0;
    visibility: hidden;
    cursor: pointer;
    .transition(300ms);
  }
  &.sortable {
    .item-inner {
      .transition(300ms);
    }
  }
  &.sortable-opened {
    .sortable-handler {
      visibility: visible;
      opacity: 1;
    }
    .item-inner, .item-link .item-inner {
      padding-right: 35px;
    }
    .item-link .item-inner, .item-link .item-title-row {
      background-image: none;
    }
  }
  &.sortable-sorting {
    li {
      .transition(300ms);
    }
  }
  li.sorting {
    z-index: 50;
    background: rgba(255,255,255,0.8);
    box-shadow: 0px 2px 8px rgba(0,0,0,0.6);
    .transition(0ms);
    .item-inner {
      border-bottom: none;
    }
  }

  // Last-childs
  li {
    &:last-child {
      .list-button {
        border-bottom: none;
      }
    }
    &:last-child, &:last-child li:last-child {
      .item-inner, .swipeout-actions {
        border-bottom: none;
      }
    }
    li:last-child, &:last-child li {
      .item-inner, .swipeout-actions {
        border-bottom: 1px solid @listBlockBorderColor;
      }
    }
  }
}
html.retina.ios-gt-7 {
  .list-block {
    ul {
      border-top-width: 0.5px;
      border-bottom-width: 0.5px;
    }
    li:not(:last-child) {
      .item-inner{
        border-bottom-width: 0.5px;
      }
    }
  }
  .swipeout-actions {
    border-bottom-width: 0.5px;
  }
  .item-divider {
    border-top-width: 0.5px;
    margin-top: -0.5px;
  }
  .item-link.list-button {
    border-bottom-width: 0.5px;
  }
}

/* === Contacts === */
.contacts-content {
  background: #fff;
}
.contacts-block {
  margin: 0;
  .list-group-title {
    padding: 0 15px;
    background: #f7f7f7;
    color:#000;
    font-weight: 500;
    line-height: 22px;
    height: 22px;
  }
  .list-group:first-child ul {
    border-top: none;
  }
  .list-group:last-child ul {
    border-bottom: none;
  }
}
/* === Forms === */
// Inputs
.list-block {
  input[type="text"], input[type="password"], input[type="email"], input[type="tel"], input[type="url"], input[type="date"], input[type="datetime-local"], input[type="number"], select, textarea {
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
    .border-box();
    border: none;
    background: none;
    border-radius: 0 0 0 0;
    .box-shadow(none);
    display: block;
    padding: 0 0 0 5px;
    margin: 0;
    width: 100%;
    height: 43px;
    color: #000;
    font-size: 17px;
    font-family: inherit;
  }
  input[type="date"], input[type="datetime-local"] {
    line-height: 44px;
  }
  select {
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
  }
  .lable {
    vertical-align: top;
  }
  textarea {
    height: 100px;
    resize:none;
    line-height: 1.4;
    padding-top: 8px;
    padding-bottom: 7px;
  }
}

//Switch
.label-switch {
  display: inline-block;
  vertical-align: middle;
  width: 52px;
  border-radius: 16px;
  .border-box();
  height: 32px;
  position: relative;
  cursor: pointer;
  .align-self(center);
  .checkbox {
    width: 52px;
    border-radius: 16px;
    .border-box();
    height: 32px;
    background: #e5e5e5;
    z-index: 0;
    margin: 0;
    padding: 0;
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
    border:none;
    cursor: pointer;
    position: relative;
    .transition(300ms);
    &:before {
      content:' ';
      position: absolute;
      left: 2px;
      top: 2px;
      width: 48px;
      border-radius: 16px;
      .border-box();
      height: 28px;
      background: #fff;
      z-index: 1;
      .transition(300ms);
      .transform(scale(1));
    }
    &:after {
      content:' ';
      height: 28px;
      width: 28px;
      border-radius: 28px;
      background: #fff;
      position: absolute;
      z-index: 2;
      top: 2px;
      left: 2px;
      .box-shadow(0 2px 5px rgba(0,0,0,0.4));
      .transform(translateX(0px));
      .transition(300ms);
    }
  }
  input[type="checkbox"] {
    display: none;
    &:checked {
      &+ .checkbox {
        background: #4cd964;
        &:before {
          .transform(scale(0));
        }
        &:after {
          .transform(translateX(22px));
        }
      }
    }
  }
}
html.android {
  .label-switch input[type="checkbox"] {
    &+ .checkbox {
      .transition(0);
      &:after, &:before {
        .transition(0);
      }
    }
  }
}
//Buttons
.button {
  border: 1px solid @blue;
  color: @blue;
  text-decoration: none;
  text-align: center;
  display: block;
  border-radius: 5px;
  line-height: 27px;
  .border-box();
  -webkit-appearance: none;
  -moz-appearance: none;
  -ms-appearance: none;
  appearance: none;
  padding: 0 10px;
  margin: 0;
  height: 29px;
  white-space: nowrap;
  position: relative;
  overflow: hidden;
  text-overflow:ellipsis;
  font-size: 14px;
  font-family: inherit;
  cursor: pointer;
  input[type="submit"]&, input[type="button"]&{
    width: 100%;
  }

  &:active {
    background: rgba(red(@blue), green(@blue), blue(@blue), .15);
  }
  &.button-round {
    border-radius: 27px;
  }
  &.active {
    background: @blue;
    color: #fff;
  }
  &.button-big {
    font-size: 17px;
    height: 44px;
    line-height: 42px;
  }
  &.button-fill {
    color:#fff;
    background: @blue;
    border: none;
    &:active {
      opacity: 0.8;
    }
  }
}
.buttons-row {
  .align-self(center);
  .flexbox();
  .flex-wrap(nowrap);
  .button {
    border-radius: 0 0 0 0;
    border-left-width: 0;
    width: 100%;
    -webkit-box-flex:1;
    -ms-flex:1;
  }
  .button:first-child {
    border-radius: 5px 0 0 5px;
    border-left-width: 1px;
    border-left-style: solid;
  }
  .button:last-child {
    border-radius: 0 5px 5px 0;
  }
  .button.button-round:first-child {
    border-radius: 27px 0 0 27px;
  }
  .button.button-round:last-child {
    border-radius: 0 27px 27px 0;
  }
}


// Slider
.range-slider {
  width: 100%;
  position: relative;
  overflow: hidden;
  padding-left: 3px;
  padding-right: 3px;
  margin-left: -1px;
  .align-self(center);
  input[type="range"] {
    position: relative;
    height: 28px;
    width: 100%;
    margin: 4px 0 5px 0;
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
    background: -webkit-gradient(linear, 50% 0, 50% 100%, color-stop(0, #b7b8b7), color-stop(100%, #b7b8b7));
    background: linear-gradient(to right, #b7b8b7 0, #b7b8b7 100%);
    background-position: center;
    background-size: 100% 2px;
    background-repeat: no-repeat;
    outline: 0;
  }
  input[type="range"]:after {
    height: 2px;
    background: #fff;
    content:' ';
    width: 5px;
    top: 50%;
    margin-top: -1px;
    left: -5px;
    z-index: 1;
    position: absolute;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
    border: none;
    height: 28px;
    width: 28px;
    position: relative;
    background: none;
  }
  input[type="range"]::-webkit-slider-thumb:after {
    height: 28px;
    width: 28px;
    border-radius: 28px;
    background: #fff;
    z-index: 10;
    .box-shadow(0 2px 4px rgba(0,0,0,0.4));
    position: absolute;
    left: 0;
    top: 0;
    content: ' ';
  }

  input[type="range"]::-webkit-slider-thumb:before {
    position: absolute;
    top: 50%;
    right: 100%;
    width: 2000px;
    height: 2px;
    margin-top: -1px;
    z-index: 1;
    background: @blue;
    content: ' ';
  }
}

// Checkboxes
label.label-checkbox {
  cursor: pointer;
  i.icon-form-checkbox {
    width: 22px;
    height: 22px;
    position: relative;
    border-radius: 22px;
    border: 1px solid #c7c7cc;
    .border-box();

    &:after {
      content:' ';
      position: absolute;
      left: 50%;
      margin-left: -6px;
      top: 50%;
      margin-top: -4px;
      width: 12px;
      height: 9px;
    }
  }
  input[type="checkbox"], input[type="radio"] {
    display: none;
    &:checked + .item-media{
      i.icon-form-checkbox {
        border: none;
        background-color: @blue;
      }
      i.icon-form-checkbox:after {
        background: no-repeat center;
        background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 12 9' xml:space='preserve'><polygon fill='%23ffffff' points='12,0.7 11.3,0 3.9,7.4 0.7,4.2 0,4.9 3.9,8.8 3.9,8.8 3.9,8.8 '/></svg>");
        -webkit-background-size: 12px 9px;
        background-size: 12px 9px;
      }
    }
  }
}
label.label-radio {
  cursor: pointer;
  input[type="checkbox"], input[type="radio"] {
    display: none;
    ~ .item-inner {
      padding-right: 35px;
    }
    &:checked ~ .item-inner{
      background: no-repeat center;
      background-image: url("data:image/svg+xml;charset=utf-8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13 10'><polygon fill='%23007aff' points='11.6,0 4.4,7.2 1.4,4.2 0,5.6 4.4,10 4.4,10 4.4,10 13,1.4 '/></svg>");
      background-position: 90% center;
      background-position: ~"-webkit-calc(100% - 15px)" center;
      background-position: ~"calc(100% - 15px)" center;
      -webkit-background-size: 13px 10px;
      background-size: 13px 10px;
    }
  }
}
label.label-checkbox, label.label-radio {
  .transition(300ms);
  &:active {
    .transition(0ms);
    background-color: #d9d9d9;
    .item-inner {
      border-bottom-color: transparent;
    }
  }
}

// Smart selects
.smart-select {
  select {
    display: none;
  }
}
/* === Panels === */
@panelWidth:260px;
@panelsDuration: 400ms;
.panel-overlay {
  .full-size();
  background: rgba(0,0,0,0);
  opacity: 0;
  z-index: 5999;
  display: none;
}
.panel {
  z-index: 1000;
  display: none;
  background: #111;
  .border-box();
  .scrollable();
  position: absolute;
  width: @panelWidth;
  top: 0;
  height: 100%;
  .translate3d(0);
  .transition(@panelsDuration);

  &.panel-left {
    &.panel-cover {
      z-index: 6000;
      left: -@panelWidth;
    }
    &.panel-reveal {
      left: 0;
    }
  }
  &.panel-right {
    &.panel-cover {
      z-index: 6000;
      right: -@panelWidth;
    }
    &.panel-reveal {
      right: 0;
    }
  }
}
body.with-panel-left-cover, body.with-panel-right-cover {
  .views {
    .translate3d(0);
  }
  .panel-overlay {
    display: block;
  }
}
body.with-panel-left-reveal, body.with-panel-right-reveal {
  .views {
    .transition(@panelsDuration);
    -webkit-transition-property: -webkit-transform;
    -moz-transition-property: -moz-transform;
    transition-property: transform;
  }
  .panel-overlay {
    display: block;
  }
}
body.with-panel-left-reveal {
  .views {
    .translate3d(@panelWidth);
  }
  .panel-overlay {
    margin-left: @panelWidth;
  }
}
body.with-panel-left-cover {
  .panel-left {
    .translate3d(@panelWidth);
  }
}
body.with-panel-right-reveal {
  .views {
    .translate3d(-@panelWidth);
  }
  .panel-overlay {
    margin-left: -@panelWidth;
  }
}
body.with-panel-right-cover {
  .panel-right {
    .translate3d(-@panelWidth);
  }
}
body.panel-closing {
  .views {
    .transition(@panelsDuration);
    -webkit-transition-property: -webkit-transform;
    -moz-transition-property: -moz-transform;
    transition-property: transform;
  }
}
/* === Statusbar overlay === */
html.with-statusbar-overlay body{
  padding-top: 20px;
  .border-box();
  .statusbar-overlay {
    display: block;
  }
  .panel {
    padding-top: 20px;
  }
}
.statusbar-overlay {
  background: @navbarBg;
  z-index: 10000; // A bit lower than .modals-overlay
  position: absolute;
  left: 0;
  top: 0;
  height: 20px;
  width: 100%;
  display: none;
  .transition(@panelsDuration);
}
/* === Preloader === */
.preloader {
  display: inline-block;
  width: 20px;
  height: 20px;
  -webkit-transform-origin: 50%;
  transform-origin: 50%;
  -webkit-animation: preloader-spin 1s step-end infinite;
  animation: preloader-spin 1s step-end infinite;
}
.preloader:after {
  display: block;
  content: "";
  width: 100%;
  height: 100%;
  // Note: Firefox requires '#' to be encoded as '%23' with data URIs
  background-image: url("data:image/svg+xml;charset=utf-8,<svg viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><line id='l' x1='60' x2='60' y1='7' y2='27' stroke='%236c6c6c' stroke-width='11' stroke-linecap='round'/></defs><g><use xlink:href='%23l' opacity='.27'/><use xlink:href='%23l' opacity='.27' transform='rotate(30 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(60 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(90 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(120 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(150 60,60)'/><use xlink:href='%23l' opacity='.37' transform='rotate(180 60,60)'/><use xlink:href='%23l' opacity='.46' transform='rotate(210 60,60)'/><use xlink:href='%23l' opacity='.56' transform='rotate(240 60,60)'/><use xlink:href='%23l' opacity='.66' transform='rotate(270 60,60)'/><use xlink:href='%23l' opacity='.75' transform='rotate(300 60,60)'/><use xlink:href='%23l' opacity='.85' transform='rotate(330 60,60)'/></g></svg>");
  background-position: 50%;
  background-size: 100%;
  background-repeat: no-repeat;

}
.preloader-white:after {
  background-image: url("data:image/svg+xml;charset=utf-8,<svg viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><line id='l' x1='60' x2='60' y1='7' y2='27' stroke='%23fff' stroke-width='11' stroke-linecap='round'/></defs><g><use xlink:href='%23l' opacity='.27'/><use xlink:href='%23l' opacity='.27' transform='rotate(30 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(60 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(90 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(120 60,60)'/><use xlink:href='%23l' opacity='.27' transform='rotate(150 60,60)'/><use xlink:href='%23l' opacity='.37' transform='rotate(180 60,60)'/><use xlink:href='%23l' opacity='.46' transform='rotate(210 60,60)'/><use xlink:href='%23l' opacity='.56' transform='rotate(240 60,60)'/><use xlink:href='%23l' opacity='.66' transform='rotate(270 60,60)'/><use xlink:href='%23l' opacity='.75' transform='rotate(300 60,60)'/><use xlink:href='%23l' opacity='.85' transform='rotate(330 60,60)'/></g></svg>");
}
@-webkit-keyframes preloader-spin {
  .preloader-loop(0);
  .preloader-loop(@i) when (@i <= 12) {
    @j: ((@i * (1/12)) * 100%);
    @{j} {
      @deg: (@i) * 30deg;
      -webkit-transform: rotate(@deg);
    }
    .preloader-loop(@i + 1);
  }
}
@keyframes preloader-spin {
  .preloader-loop(0);
  .preloader-loop(@i) when (@i <= 12) {
    @j: ((@i * (1/12)) * 100%);
    @{j} {
      @deg: (@i) * 30deg;
      transform: rotate(@deg);
    }
    .preloader-loop(@i + 1);
  }
}

/* === Modals === */
@modalBgColor:#e8e8e8;
@modalButonColor : @blue;
@modalButonBg: @modalBgColor;
@modalButonActiveBg:#d4d4d4;
@modalDuration:400ms;
@actionsModalDuration:300ms;
@actionsModalButtonBg: rgba(243,243,243,0.95);
@actionsModalActiveButtonBg:#dcdcdc;
@popoverBg: rgba(255,255,255,0.95);
@popupDuration: 400ms;
.modal-overlay, .preloader-indicator-overlay, .popup-overlay {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.4);
  z-index: 10600;
  visibility: hidden;
  opacity: 0;
  .transition(@modalDuration);
  &.modal-overlay-visible {
    visibility: visible;
    opacity: 1;
  }
}
.popup-overlay {
  z-index: 10200;
}
.modal {
  width: 270px;
  position: absolute;
  z-index: 11000;
  left: 50%;
  margin-left: -135px;
  margin-top: 0;
  top: 50%;
  text-align: center;
  border-radius: 7px;
  opacity: 0;
  .transform(translate3d(0,0,0) scale(1.185));
  -webkit-transition-property: -webkit-transform, opacity;
  -moz-transition-property: -moz-transform, opacity;
  -ms-transition-property: -ms-transform, opacity;
  -o-transition-property: -o-transform, opacity;
  transition-property: transform, opacity;
  color:#000;
  &.modal-in {
    opacity: 1;
    .transition(@modalDuration);
    .transform(translate3d(0,0,0) scale(1));
  }
  &.modal-out {
    opacity: 0;
    z-index: 11000-1;
    .transition(@modalDuration);
    .transform(translate3d(0,0,0) scale(0.815));
  }
}
.modal-inner {
  padding: 15px;
  border-bottom: 1px solid #b5b5b5;
  border-radius: 7px 7px 0 0;
  background: @modalBgColor;
}
.modal-title {
  font-weight: 500;
  font-size: 18px;
  text-align: center;
  +.modal-text {
    margin-top: 5px;
  }
}
.modal-buttons {
  height: 44px;
  overflow: hidden;
  .flexbox();
  .justify-content(center);
}
.modal-button {
  width: 100%;
  padding: 0 5px;
  height: 44px;
  font-size: 17px;
  line-height: 44px;
  text-align: center;
  color: @modalButonColor;
  background: @modalButonBg;
  display: block;
  position: relative;
  white-space: nowrap;
  text-overflow:ellipsis;
  overflow: hidden;
  cursor: pointer;
  .border-box();
  border-right: 1px solid #b5b5b5;
  -webkit-box-flex:1;
  -ms-flex:1;
  &:first-child {
    border-radius: 0 0 0 7px;
  }
  &:last-child {
    border-right: none;
    border-radius: 0 0 7px 0;
  }
  &:first-child:last-child {
    border-radius: 0 0 7px 7px;
  }
  &.modal-button-bold {
    font-weight: 500;
  }
  &:active {
    background: @modalButonActiveBg;
  }
}
.modal-no-buttons {
  .modal-inner {
    border-radius: 7px;
    border-bottom: none;
  }
  .modal-buttons {
    display: none;
  }
}
// Action sheet
.actions-modal {
  position: absolute;
  left: 0;
  bottom: 0;
  z-index: 11000;
  width: 100%;
  .transform(translate3d(0,100%,0));
  &.modal-in {
    .transition(@actionsModalDuration);
    .transform(translate3d(0,0,0));
  }
  &.modal-out {
    z-index: 11000-1;
    .transition(@actionsModalDuration);
    .transform(translate3d(0,100%,0));
  }
}
.actions-modal-group {
  margin: 8px;
}
.actions-modal-button, .actions-modal-label {
  width: 100%;
  text-align: center;
  font-weight: normal;
  margin: 0;
  background: @actionsModalButtonBg;
  .border-box();
  display: block;
  border-bottom: 1px solid #d2d2d6;
  a {
    text-decoration: none;
    color: inherit;
  }
  b {
    font-weight: 500;
  }
  &.actions-modal-button-bold {
    font-weight: 500;
  }
  &.actions-modal-button-red {
    color: @red;
  }
  &:first-child {
    border-radius: 4px 4px 0 0;
  }
  &:last-child {
    border: none;
    border-radius: 0 0 4px 4px;
  }
  &:first-child:last-child {
    border-radius: 4px;
  }
}
.actions-modal-button {
  cursor: pointer;
  line-height: 43px;
  font-size: 20px;
  color: @blue;
  &:active {
    background: @actionsModalActiveButtonBg;
  }
}
.actions-modal-label {
  font-size: 13px;
  line-height: 1.3;
  min-height: 44px;
  padding: 8px 10px;
  color: #8a8a8a;
  .flexbox();
  .justify-content(center);
  .align-items(center);
}
// Prompt
input.modal-text-input {
  .border-box();
  height: 30px;
  background: #fff;
  margin: 0;
  margin-top: 15px;
  padding: 0 5px;
  border: 1px solid #a0a0a0;
  border-radius: 5px;
  width: 100%;
  font-size: 14px;
  font-family: inherit;
  display: block;
  .box-shadow(0 0 0 rgba(0,0,0,0));
  -webkit-appearance: none;
  -moz-appearance: none;
  -ms-appearance: none;
  appearance: none;
  + input.modal-text-input {
    margin-top: 5px;
  }
  &.modal-text-input-double {
    border-radius: 5px 5px 0 0;
    + input.modal-text-input {
      margin-top: 0;
      border-top: 0;
      border-radius: 0 0 5px 5px;
    }
  }
}
// Popover
.popover {
  width: 320px;
  background:@popoverBg;
  z-index: 11000;
  margin: 0;
  top: 0;
  opacity: 0;
  left: 0;
  border-radius: 7px;
  position: absolute;
  display: none;
  .transform(none);
  -webkit-transition-property: opacity;
  -moz-transition-property: opacity;
  -ms-transition-property: opacity;
  -o-transition-property: opacity;
  transition-property: opacity;
  &.modal-in {
    .transition(@actionsModalDuration);
    opacity: 1;
  }
}
.popover-angle {
  width: 26px;
  height: 26px;
  position: absolute;
  left: -26px;
  top: 0;
  z-index: 100;
  overflow: hidden;
  &:after {
    content:' ';
    background: @popoverBg;
    width: 26px;
    height: 26px;
    position: absolute;
    left: 0;
    top: 0;
    border-radius: 3px;
    .transform(rotate(45deg));
  }
  &.on-left {
    left: -26px;
    &:after {
      left: 19px;
      top: 0;
    }
  }
  &.on-right {
    left: 100%;
    &:after {
      left: -19px;
      top: 0;
    }
  }
  &.on-top {
    left: 0;
    top: -26px;
    &:after {
      left: 0;
      top: 19px;
    }
  }
  &.on-bottom {
    left: 0;
    top: 100%;
    &:after {
      left: 0;
      top: -19px;
    }
  }
}
.popover-inner {
  .scrollable();
  >.list-block {
    margin: 0;
    ul {
      border: none;
      background: none;
    }
    li:first-child a{
      border-radius: 7px 7px 0 0;
    }
    li:last-child a{
      border-radius: 0 0 7px 7px;
    }
    li:first-child:last-child a {
      border-radius: 7px;
    }
  }
}

// Popup
.popup, .login-screen {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 10400;
  background: #fff;
  .border-box();
  display: none;
  .scrollable();
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  -ms-transition-property: -ms-transform;
  -o-transition-property: -o-transform;
  transition-property: transform;
  .translate3d(0,100%,0);
  &.modal-in, &.modal-out {
    .transition(@popupDuration);
  }
  &.modal-in {
    .translate3d(0,0,0);
  }
  &.modal-out {
    .translate3d(0,100%,0);
  }
}
.login-screen.modal-in, .login-screen.modal-out {
  display: block;
}
// iPad Popup
@media all and (min-width:630px) and (min-height:630px) {
  .popup:not(.tablet-fullscreen) {
    width: 630px;
    height: 630px;
    left: 50%;
    top: 50%;
    margin-left: -315px;
    margin-top: -315px;
    .translate3d(0,1024px,0);
    &.modal-in {
      .translate3d(0,0,0);
    }
    &.modal-out {
      .translate3d(0,1024px,0);
    }
  }
}
html.with-statusbar-overlay {
  // iPhone with statusbar overlay
  @media all and (max-width:629px), (max-height:629px) {
    .popup {
      height: ~"-webkit-calc(100% - 20px)";
      height: ~"calc(100% - 20px)";
      top: 20px;
    }
    .popup-overlay {
      z-index: 9800;
    }
  }
  .login-screen, .popup.tablet-fullscreen {
    height: ~"-webkit-calc(100% - 20px)";
    height: ~"calc(100% - 20px)";
    top: 20px;
  }
}

//Preloaders modals
.modal .preloader {
  width: 34px;
  height: 34px;
}
.preloader-indicator-overlay {
  visibility: visible;
  opacity: 0;
  background: none;
}
.preloader-indicator-modal {
  position: absolute;
  left: 50%;
  top: 50%;
  padding: 8px;
  margin-left: -25px;
  margin-top: -25px;
  background: rgba(0,0,0,0.8);
  z-index: 11000;
  border-radius: 5px;
  .preloader {
    display: block;
    width: 34px;
    height: 34px;
  }
}
html.retina.ios-gt-7 {
  .modal-inner {
    border-bottom-width: 0.5px;
  }
  .modal-button {
    border-right-width: 0.5px;
  }
  .actions-modal-button, .actions-modal-label {
    border-bottom-width: 0.5px;
  }
  input.modal-text-input {
    border-width: 0.5px;
  }
}
/* === Pull To Refresh === */
.pull-to-refresh-layer {
  position:absolute;
  position: relative;
  margin-top: -44px;
  left:0;
  top:0;
  width:100%;
  height:44px;

  .preloader {
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -10px;
    margin-top: -10px;
    visibility: hidden;

  }
  .pull-to-refresh-arrow {
    width: 13px;
    height: 20px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -6px;
    margin-top: -10px;
    background: no-repeat center;
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 26 40'><polygon points='9,22 9,0 17,0 17,22 26,22 13.5,40 0,22' fill='%238c8c8c'/></svg>");
    background-size: 13px 20px;
    z-index: 10;
    .transform(rotate(0deg) translate3d(0,0,0));
    .transition(300ms);
  }

}
.pull-to-refresh-content {
  &.transitioning, &.refreshing {
    .transition(400ms);
  }
  &:not(.refreshing) {
    .preloader {
      .animation(none);
    }
  }
  &.refreshing {
    .translate3d(0,44px,0);
    .pull-to-refresh-arrow {
      visibility: hidden;
      .transition(0ms);
    }
    .preloader {
      visibility: visible;
    }
  }
  &.pull-up {
    .pull-to-refresh-arrow {
      .transform(rotate(180deg) translate3d(0,0,0));
    }
  }

}
/* === Tabs === */
.tabs {
  .tab {
    display: none;
  }
  .tab.active {
    display: block;
  }
}
.tabs-animated-wrap {
  position: relative;
  width: 100%;
  overflow: hidden;
  height: 100%;
  >.tabs {
    .flexbox();
    height: 100%;
    .transition(300ms);
    >.tab {
      width: 100%;
      display: block;
      .flex-shrink(0);
    }
  }

}
/* === Photo Browser === */
.photo-browser {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 10500;
  body > & {
    opacity: 0;
    display: none;
    .transform(translate3d(0,0,0));
    &.photo-browser-in {
      display: block;
      .animation(photoBrowserIn 400ms forwards);
    }
    &.photo-browser-out {
      display: block;
      .animation(photoBrowserOut 400ms forwards);
    }
    html.with-statusbar-overlay & {
      height: ~"-webkit-calc(100% - 20px)";
      height: ~"calc(100% - 20px)";
      top: 20px;
    }
  }
  .popup > &, body > & {
    .navbar, .toolbar {
      .transform(translate3d(0,0,0));
    }
  }
  .page[data-page="photo-browser-slides"] {
    background:none;
  }

}
.photo-browser-popup {
  background: none;
}
.photo-browser, .view[data-page="photo-browser-slides"] {
  .navbar, .toolbar {
    background: rgba(247,247,247,0.95);
    .transition(400ms);
  }
}

.view[data-page="photo-browser-slides"] .page[data-page="photo-browser-slides"]{
  .navbar, .toolbar {
    .transform(translate3d(0,0,0));
  }
}
.photo-browser-exposed {
  .navbar, .toolbar {
    opacity: 0;
    visibility: hidden;
    pointer-events:none;
  }
  .photo-browser-slider-container {
    background: #000;
  }
}
.photo-browser-of {
  margin: 0 5px;
}
.photo-browser-captions {
  pointer-events:none;
  position: absolute;
  left: 0;
  width: 100%;
  bottom: 0;
  z-index: 10;
  opacity: 1;
  .transition(400ms);
  &.photo-browser-captions-exposed {
    opacity: 0;
  }
}
.toolbar ~ .photo-browser-captions {
  bottom: 44px;
  .transform(translate3d(0, 0px, 0));
  .photo-browser-exposed & {
    .transform(translate3d(0, 44px, 0));
  }
  &.photo-browser-captions-exposed {
    .transform(translate3d(0, 0px, 0));
  }
}

.photo-browser-caption {
  .border-box();
  .transition(300ms);
  position:absolute;
  bottom:0;
  left:0;
  opacity: 0;
  padding:4px 5px;
  width:100%;
  text-align:center;
  color:#fff;
  background: rgba(0,0,0,0.8);
  &:empty {
    display: none;
  }
  &.photo-browser-caption-active {
    opacity: 1;
  }
  .photo-browser-captions-light & {
    background: rgba(255,255,255,0.8);
    color:#000;
  }
  .photo-browser-exposed & {
    color:#fff;
    background: rgba(0,0,0,0.8);
  }
}

.photo-browser-slider-container {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #fff;
  .transition(400ms);
}
.photo-browser-slider-wrapper {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  .flexbox();
}
.photo-browser-link-inactive {
  opacity: 0.3;
}
.photo-browser-slide {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  .flexbox();
  .justify-content(center);
  .align-items(center);
  .flex-shrink(0);
  .border-box();
  &.transitioning {
    .transition(400ms);
  }
  span {
    width: 100%;
    text-align: center;
    display: none;
  }
  img {
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    display: none;
  }
  &.slider-slide-active, &.slider-slide-next, &.slider-slide-prev {
    span {
      display: block;
    }
    img {
      display: inline;
    }
  }
  iframe {
    width: 100%;
    height: 100%;
  }
}

.photo-browser-dark {
  .navbar, .toolbar {
    background: rgba(30,30,30,0.8);
    border: none;
    color:#fff;
    a {
      color:#fff;
    }
  }
  .photo-browser-slider-container {
    background: #000;
  }

}

@-webkit-keyframes photoBrowserIn {
  0% {
    -webkit-transform: translate3d(0,0,0) scale(0.5);
    opacity: 0;
  }
  100% {
    -webkit-transform: translate3d(0,0,0) scale(1);
    opacity: 1;
  }
}
@keyframes photoBrowserIn {
  0% {
    transform: translate3d(0,0,0) scale(0.5);
    opacity: 0;
  }
  100% {
    transform: translate3d(0,0,0) scale(1);
    opacity: 1;
  }
}
@-webkit-keyframes photoBrowserOut {
  0% {
    -webkit-transform: translate3d(0,0,0) scale(1);
    opacity: 1;
  }
  100% {
    -webkit-transform: translate3d(0,0,0) scale(0.5);
    opacity: 0;
  }
}
@keyframes photoBrowserOut {
  0% {
    transform: translate3d(0,0,0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate3d(0,0,0) scale(0.5);
    opacity: 0;
  }
}

/* === Search Bar === */
@searchbarBg: #c9c9ce;
@searchbarBorderColor: #b4b4b4;
.searchbar {
  height: 44px;
  background: @searchbarBg;
  .border-box();
  border-bottom: 1px solid @searchbarBorderColor;
  padding: 0 8px;
  overflow: hidden;
  position: relative;
  .flexbox();
  .align-items(center);
  html.retina.ios-gt-7 & {
    border-bottom-width: 0.5px;
  }
  .searchbar-input {
    width: 100%;
    height: 28px;
    position: relative;
    .flex-shrink(1);
  }
  input[type="search"] {
    .border-box();
    width: 100%;
    height: 100%;
    display: block;
    border: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
    border-radius: 5px;
    font-family: inherit;
    color:#000;
    font-size: 14px;
    font-weight: normal;
    padding: 0 28px;
    background: #fff url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13 13' enable-background='new 0 0 13 13'><g><path fill='%23939398' d='M5,1c2.2,0,4,1.8,4,4S7.2,9,5,9S1,7.2,1,5S2.8,1,5,1 M5,0C2.2,0,0,2.2,0,5s2.2,5,5,5s5-2.2,5-5S7.8,0,5,0 L5,0z'/></g><line stroke='%23939398' stroke-miterlimit='10' x1='12.6' y1='12.6' x2='8.2' y2='8.2'/></svg>") no-repeat 8px center;
    -webkit-background-size: 13px 13px;
    background-size: 13px 13px;
    &::-webkit-input-placeholder {
      color: #939398;
      opacity: 1;
    }
    &::-webkit-search-cancel-button {
      -webkit-appearance:none;
    }
  }
  .searchbar-clear {
    position: absolute;
    width: 28px;
    height: 28px;
    right: 0;
    top: 0;
    opacity: 0;
    pointer-events:none;
    background: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28 28'><circle cx='14' cy='14' r='14' fill='%238e8e93'/><line stroke='%23ffffff' stroke-width='2' stroke-miterlimit='10' x1='8' y1='8' x2='20' y2='20'/><line fill='none' stroke='%23ffffff' stroke-width='2' stroke-miterlimit='10' x1='20' y1='8' x2='8' y2='20'/></svg>") no-repeat center;
    -webkit-background-size: 14px 14px;
    background-size: 14px 14px;
    .transition(300ms);
    cursor: pointer;
  }
  .searchbar-cancel {
    .transition(300ms);
    .translate3d(0,0,0);
    font-size: 17px;
    cursor: pointer;
    opacity: 0;
    .flex-shrink(0);
    margin-left: 0;
    pointer-events:none;
  }
  &.searchbar-active {
    .searchbar-cancel {
      margin-left: 8px;
      opacity: 1;
      pointer-events: auto;
      &:active{
        opacity: 0.3;
        .transition(0ms);
      }
    }
  }
  &.searchbar-not-empty {
    .searchbar-clear {
      pointer-events: auto;
      opacity: 1;
    }
  }
}
.searchbar-overlay {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 100;
  opacity: 0;
  pointer-events:none;
  background: rgba(0,0,0,0.4);
  .transition(300ms);
  .translate3d(0,0,0);
  &.searchbar-overlay-active {
    opacity: 1;
    pointer-events: auto;
  }
}
.searchbar-not-found {
  display: none;
}
.hidden-by-searchbar, .list-block .hidden-by-searchbar, .list-block li.hidden-by-searchbar {
  display: none;
}
.page > .searchbar {
  position: absolute;
  width: 100%;
  left: 0;
  top: 0;
  z-index: 200;
  & ~ .page-content {
    padding-top: 44px;
  }
}
.navbar-fixed, .navbar-through {
  .page > .searchbar, > .searchbar {
    top: 44px;
    & ~ .page-content {
      padding-top: 88px;
    }
  }
}
/* === Message Bar === */
.messagebar {
  .translate3d(0,0,0);
  .transition(0ms);
  textarea {
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    border: 1px solid #c8c8cd;
    background: #fff;
    border-radius: 5px;
    box-shadow: none;
    display: block;
    padding: 3px 8px 3px;
    margin: 0;
    width: 100%;
    height: 28px;
    color: #000;
    font-size: 17px;
    line-height: 20px;
    font-family: inherit;
    resize:none;
    .flex-shrink(1);
  }
  .link {
    .align-self(flex-end);
  }
  .link.icon-only:first-child {
    margin-left: -6px;
  }
  .link:not(.icon-only) + textarea {
    margin-left: 8px;
  }
  textarea + .link {
    margin-left: 8px;
  }
  .link {
    .flex-shrink(0);
  }
  ~ .page-content {
    padding-bottom: 44px;
  }
  .page.no-toolbar & ~.page-content {
    padding-bottom: 44px;
  }
  .hidden-toolbar & {
    .translate3d(0,0,0);
    .transition(0ms);
  }
}

/* === Messages === */
.messages-content {
  background: #fff;
}
.messages {
  .flexbox();
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
}
.messages-date {
  text-align: center;
  font-weight: 500;
  font-size: 11px;
  line-height: 1;
  margin: 10px 15px;
  color: #8e8e93;
  span {
    font-weight: 400;
  }
}
.message {
  .border-box();
  margin: 1px 10px 0;
  max-width: 70%;
  .flexbox();
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
  &:first-child {
    margin-top: 10px;
  }
  .message-text {
    .border-box();
    border-radius: 16px;
    padding: 6px 16px 9px;
    min-width: 48px;
    min-height: 35px;
    font-size: 17px;
    line-height: 1.2;
    word-break: break-word;
  }
  &.message-pic {
    .message-text {
      padding: 0;
      background: none;
    }
    img {
      display: block;
      height: auto;
      max-width: 100%;
      border-radius: 16px;
    }
  }
}
.message-name {
  font-size: 12px;
  line-height: 1;
  color: #8e8e93;
  margin-bottom: 2px;
  margin-top: 7px;
  display: none;
}
.message-avatar {
  width: 29px;
  height: 29px;
  border-radius: 100%;
  margin-top: -29px;
  position: relative;
  top: 1px;
  background-size: cover;
  opacity: 0;
  .transition(400ms);
}
.message-sent {
  -ms-flex-item-align: end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
  .align-items(flex-end);
  .message-name {
    margin-right: 16px;
  }
  &.message-with-avatar {
    .message-text {
      margin-right: 29px;
    }
    .message-name {
      margin-right: 45px;
    }
  }
  .message-text {
    padding-right: 22px;
    background-color: #00d449;
    color: white;
    margin-left: auto;
    -webkit-mask-box-image: url("data:image/svg+xml;charset=utf-8,<svg height='35' viewBox='0 0 96 70' width='48' xmlns='http://www.w3.org/2000/svg'><path d='m84 35c1 7-5 37-42 35-37 2-43-28-42-35-1-7 5-37 42-35 37-2 43 28 42 35z'/></svg>") 50% 56% 49% 43%;
  }
  &.message-last {
    .message-text {
      border-radius: 16px 16px 0 16px;
      -webkit-mask-box-image: url("data:image/svg+xml;charset=utf-8,<svg height='35' viewBox='0 0 96 70' width='48' xmlns='http://www.w3.org/2000/svg'><path d='m84 35c1 7-5 37-42 35-37 2-43-28-42-35-1-7 5-37 42-35 37-2 43 28 42 35z'/><path d='m96 70c-6-2-12-10-12-19v-16l-14 27s8 8 26 8z'/></svg>") 50% 56% 49% 43%;
    }
    &.message-pic img{
      border-radius: 16px 16px 0 16px;
    }
  }
}
.message-received {
  -ms-flex-item-align: start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
  .align-items(flex-start);
  .message-text {
    padding-left: 22px;
    background-color: #e5e5ea;
    color: #000;
    -webkit-mask-box-image: url("data:image/svg+xml;charset=utf-8,<svg height='35' viewBox='0 0 96 70' width='48' xmlns='http://www.w3.org/2000/svg'><path d='m96 35c1 7-5 37-42 35-37 2-43-28-42-35-1-7 5-37 42-35 37-2 43 28 42 35z'/></svg>") 50% 43% 49% 56%;
  }
  .message-name {
    margin-left: 16px;
  }
  &.message-with-avatar {
    .message-text {
      margin-left: 29px;
    }
    .message-name {
      margin-left: 45px;
    }
  }
  &.message-last {
    .message-text {
      border-radius: 16px 16px 16px 0;
      -webkit-mask-box-image: url("data:image/svg+xml;charset=utf-8,<svg height='35' viewBox='0 0 96 70' width='48' xmlns='http://www.w3.org/2000/svg'><path d='m96 35c1 7-5 37-42 35-37 2-43-28-42-35-1-7 5-37 42-35 37-2 43 28 42 35z'/><path d='m0 70c6-2 12-10 12-19v-16l14 27s-8 8-26 8z'/></svg>") 50% 43% 49% 56%;
    }
    &.message-pic img{
      border-radius: 16px 16px 16px 0;
    }
  }
}
.message-first {
  .message-name {
    display: block;
  }
}
.message-last {
  margin-bottom: 8px;
  .message-avatar {
    opacity: 1;
  }
}
.message-appear {
  -webkit-animation: messageAppearFromBottom 400ms;
  animation: messageAppearFromBottom 400ms;
}
.new-messages-first .message-appear {
  -webkit-animation: messageAppearFromTop 400ms;
  animation: messageAppearFromTop 400ms;
}
html.retina.ios-6 {
  .message, .message.message-pic img {
    -webkit-mask-box-image:none;
    border-radius: 16px;
  }
}
@-webkit-keyframes messageAppearFromBottom {
  from {
    -webkit-transform: translate3d(0,100%,0);
  }
  to {
    -webkit-transform: translate3d(0,0,0);
  }
}
@keyframes messageAppearFromBottom {
  from {
    transform: translate3d(0,100%,0);
  }
  to {
    transform: translate3d(0,0,0);
  }
}
@-webkit-keyframes messageAppearFromTop {
  from {
    -webkit-transform: translate3d(0,-100%,0);
  }
  to {
    -webkit-transform: translate3d(0,0,0);
  }
}
@keyframes messageAppearFromTop {
  from {
    transform: translate3d(0,-100%,0);
  }
  to {
    transform: translate3d(0,0,0);
  }
}

/* === Slider === */
.slider-container {
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
}
.slider-wrapper {
  .flexbox();
  width: 100%;
  height: 100%;
  position: relative;
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  transition-property: transform;
  .slider-container-vertical > & {
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }
}
.slider-slide {
  .flex-shrink(0);
  width: 100%;
  height: 100%;
}
.slider-pagination {
  position: absolute;
  z-index: 10;
  .translate3d(0,0,0);
  left: 0;
  bottom: 10px;
  width: 100%;
  text-align: center;
  .transition(300ms);
  opacity: 1;
  -webkit-transition-property: opacity;
  -moz-transition-property: opacity;
  transition-property: opacity;
  &.slider-pagination-hidden {
    opacity: 0;
    pointer-events:none;
  }
  .slider-container-vertical > & {
    right: 10px;
    left: auto;
    top: 50%;
    bottom: auto;
    width: auto;
    height: auto;
    .translate3d(0,-50%,0);
    .slider-pagination-bullet {
      display: block;
      margin: 5px 0;
    }
  }
}
.slider-pagination-bullet {
  width: 8px;
  height: 8px;
  display: inline-block;
  border-radius: 100%;
  background: #000;
  opacity: 0.2;
  margin: 0 5px;
}
.slider-pagination-active {
  opacity: 1;
  background: @blue;
}
/* === Notifications === */
@notificationsDuration: 450ms;
.notifications {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    z-index: 20000;
    color: #fff;
    font-size: 14px;
    margin: 0;
    border: none;
    display: none;
    .border-box();
    max-height: 100%;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    .transition(@notificationsDuration);
    background: rgba(0,0,0,0.85);
    -webkit-perspective:1200px;
    perspective:1200px;
    
    &.list-block {
      background: #091B4B;
      border: none;
      > ul {
            border: none;
            background: none;
            margin: 0;
        }
      }
    .with-statusbar-overlay & {
        padding-top: 20px;
        .translate3d(0, -20px, 0);
    }
    
    .item-content {
        .align-items(flex-start);
    }
    .item-text, .item-subtitle, .item-title {
        font-size: 14px;
    }
    .item-title {
        font-weight: 500;
    }
    .item-text {
        height: auto;
        color: #d2d2d2;
        line-height: inherit;
    }
    .item-text, .item-subtitle {
        font-weight: 300;
    }
    .item-inner {
        border-bottom-color: rgba(255,255,255,0.2);
    }
    .item-media {
        i.icon {
            width: 20px;
            height: 20px;
            -webkit-background-size: cover;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
    }
    li.notification-item .item-media {
        padding-top: 13px;
    }
    .close-notification {
        width: 19px;
        height: 19px;
        background: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 19 19'><g><path fill='%23bcbfc4' d='M9.5,1C14.2,1,18,4.8,18,9.5S14.2,18,9.5,18S1,14.2,1,9.5S4.8,1,9.5,1 M9.5,0C4.3,0,0,4.3,0,9.5 S4.3,19,9.5,19S19,14.7,19,9.5S14.7,0,9.5,0L9.5,0z'/></g><line stroke='%23bcbfc4' stroke-miterlimit='10' x1='5.2' y1='5.2' x2='13.8' y2='13.8'/><line stroke='%23bcbfc4' stroke-miterlimit='10' x1='14.1' y1='4.9' x2='4.9' y2='14.1'/></svg>");
        -webkit-background-size: 100% auto;
        background-size: 100% auto;
        position: relative;
        span {
            position: absolute;
            width: 44px;
            height: 44px;
            left: 50%;
            top: 50%;
            margin-left: -22px;
            margin-top: -22px;
        }
    }
    .notification-item {
        max-width: 568px;
        margin: 0 auto;
        .transition(@notificationsDuration);
        .translate3d(0,0,0);
        opacity: 1;
    }
    .notification-hidden {
        opacity: 0;
        .translate3d(0,0,0);
    }
}
/* === Color Themes === */
.theme-mixin(@colorName, @color, @colorHex) {
  //Plain color and links
  .color-@{colorName} {
    color: @color;
    .list-block .item-link.list-button&, .tabbar a.active&, a& {
      color: @color;
    }
    .label-switch input[type="checkbox"]:checked + .checkbox&, .label-switch& input[type="checkbox"]:checked + .checkbox{
      background-color: @color;
    }
  }
  //Buttons
  .color-@{colorName}.button:not(.button-fill), .color-@{colorName}.buttons-row .button, .theme-@{colorName} .button:not(.button-fill) {
    border-color: @color;
    &:active {
      background-color: rgba(red(@color), green(@color), blue(@color), 0.15);
    }
    &.active {
      background-color: @color;
      color:#fff;
    }
  }
  .theme-@{colorName} .button.button-fill, .button.button-fill.color-@{colorName} {
    background: @color;
    color:#fff;
  }
  //Icons
  .color-@{colorName}, .theme-@{colorName} {
    i.icon, i.icon& {
      color:@color;
    }
  }
  i.icon-next.color-@{colorName}, i.icon-next.theme-@{colorName}, .theme-@{colorName} i.icon-next {
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15'><g><path fill='%23@{colorHex}' d='M1,1.6l11.8,5.8L1,13.4V1.6 M0,0v15l15-7.6L0,0L0,0z'/></g></svg>");
  }
  i.icon-prev.color-@{colorName}, i.icon-prev.theme-@{colorName}, .theme-@{colorName} i.icon-prev {
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15'><g><path fill='%23@{colorHex}' d='M14,1.6v11.8L2.2,7.6L14,1.6 M15,0L0,7.6L15,15V0L15,0z'/></g></svg>");
  }
  i.icon-back.color-@{colorName}, i.icon-back.theme-@{colorName}, .theme-@{colorName} i.icon-back {
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 20'><path d='M10,0l2,2l-8,8l8,8l-2,2L0,10L10,0z' fill='%23@{colorHex}'/></svg>");
  }
  i.icon-bars.color-@{colorName}, i.icon-bars.theme-@{colorName}, .theme-@{colorName} i.icon-bars {
    background-image: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 42 26'><path fill='%23@{colorHex}' d='M0,0h4v4H0V0z M8,1h34v2H8V1z M0,11h4v4H0V11z M8,12h34v2H8V12z M0,22h4v4H0V22z M8,23h34v2H8V23z'/></svg>");
  }
  // Theme
  .theme-@{colorName} {
    a, .item-link.list-button {
      color: @color;
    }
    .tabbar, .tabbar& {
      a {
        color:inherit;
      }
      a.active {
        color:@color;
      }
    }
    .range-slider, .range-slider& {
      input[type="range"]::-webkit-slider-thumb:before {
        background-color: @color;
      }
    }
    label.label-checkbox input[type="checkbox"]:checked + .item-media i.icon-form-checkbox, label.label-checkbox input[type="radio"]:checked + .item-media i.icon-form-checkbox {
      background-color: @color;
    }
    label.label-radio input[type="checkbox"]:checked ~ .item-inner, label.label-radio input[type="radio"]:checked ~ .item-inner {
      background-image: url("data:image/svg+xml;charset=utf-8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13 10'><polygon fill='%23@{colorHex}' points='11.6,0 4.4,7.2 1.4,4.2 0,5.6 4.4,10 4.4,10 4.4,10 13,1.4 '/></svg>");
    }
    .slider-pagination-active {
      background-color: @color;
    }
  }
  // Bg rule
  .bg-@{colorName}, .button.button-fill.bg-@{colorName}, a.bg-@{colorName}, .swipeout-actions a.bg-@{colorName} {
    background-color: @color;
  }
  // Border rule
  .border-@{colorName} {
    border-color: @color;
  }
}
.theme-mixin(e('gray'), #8e8e93, '8e8e93');
.theme-mixin(e('white'), #ffffff, 'ffffff');
.theme-mixin(e('black'), #000000, '000000');
.theme-mixin(e('lightblue'), #5ac8fa, '5ac8fa');
.theme-mixin(e('yellow'), #ffcc00, 'ffcc00');
.theme-mixin(e('orange'), #ff9500, 'ff9500');
.theme-mixin(e('pink'), #ff2d55, 'ff2d55');
.theme-mixin(e('blue'), #007aff, '007aff');
.theme-mixin(e('green'), #4cd964, '4cd964');
.theme-mixin(e('red'), #ff3b30, 'ff3b30');
